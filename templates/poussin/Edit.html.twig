{% extends 'base.html.twig' %}

{% block title %}Poussin{% endblock %}

{% block body %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>AB-COMPTA</title>

</head>

<body class="bg-gradient-success">

    <div class="container">

        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <!-- Nested Row within Card Body -->
                <div class="row">
                    <div class="col-lg-5 d-none d-lg-block bg-register-image"></div>
                    <div class="col-lg-12">
                        <div class="p-5">
                            <div class="form-group row">
                                <div class="col-sm-6">
                                <h6 class="m-0 font-weight-bold text-primary">Modifier la Commande</h6>     
                                </div>
                                <div class="col-sm-2">
                                    {% for tempagence in app.user.tempAgences %}
                                        <a href="{{ path('app_home_dashboardA', {'id': tempagence.agence.id}) }}" class="btn btn-success">
                                            <i class="fa fa-home"></i>
                                            Home
                                        </a> 
                                    {% endfor %} 
                                </div>
                                <div class="col-sm-2"> 
                                    <a href="{{ path('app_poussin_list')}}" class="btn btn-success"> 
                                        <i class="fa fa-list"></i>
                                        Liste
                                    </a>             
                                </div>
                                <!--<div class="btn btn-warning"><i class="fa fa-arrow-left"></i> Retour</div>  -->  
                            </div>
                                <hr>
                                <h6 class="text-center">Enregistrer un nouveau Client</h6>
                                <hr>
                                <span id="message"></span>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <input type="text" class="form-control form-control-user" id="nom"
                                           name="nom" placeholder="Nom du client" required>
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="tel" class="form-control form-control-user" id="telephone" 
                                           name="telephone" placeholder="Téléphone" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <button  class="btn btn-success btn-user btn-block" onclick='add_client()'>
                                        Enregistrer
                                    </button>
                                </div>
                            
                                <hr><hr>
                                <h10 class="text-center">Modifier la Commande</h10>
                                <hr>
                            <form class="user" action="{{path('app_poussin_update')}}" method="post" enctype="multipart/form-data">
                                <div class="form-group row">
                                    <div class="col-sm-3 mb-3 mb-sm-0">
                                        <input type="text" class="form-control form-control-user" id="recherche"
                                        name="recherche" placeholder="Recherche client" onkeyup="myFunctionP()"> 
                                        Date Commande
                                        <input type="date" name="poussins[{{ poussins.id }}][datecommande]" 
                                            value="{{ poussins.datecommande | date("Y-m-d") }}" class="form-control"> 
                                            status commande 
                                        <select  name="poussins[{{ poussins.id }}][status]"   class="form-control form-select" required>
                                            <option value="LIVREE">Livree</option>
                                            <option value="Versement">Versement</option>
                                            <option value="Modifier">Modifier</option> 
                                            <option value="Rembourser">Rembourser</option>   
                                            <option value="Annuler">Annuler</option>
                                            <option value="EN COUR">EN COUR</option>       
                                        </select>
                                    </div>
                                    <div class="col-sm-3 mb-3 mb-sm-0">
                                        <select id="poussin_client"  name="poussins[{{ poussins.id }}][client]"   class="form-control form-select"  size="5" multiple aria-label="multiple select " required>
                                            <option value="{{poussins.client.nom}}" selected> {{poussins.client.nom}}</option>
                                            {% for client in clients %}
                                                {% if client.nom != poussins.client.nom %}
                                                    <option value="{{ client.nom }}">{{ client.nom }}</option>
                                                {% endif %}
                                            {% endfor %}             
                                        </select>
                                    </div>    
                                    <div class="col-sm-2">
                                        Quantite
                                        <input type="number" name="poussins[{{ poussins.id }}][quantite]" 
                                            value="{{ poussins.quantite }}" class="form-control">
                                            Souche
                                        <input type="text" name="poussins[{{ poussins.id }}][souche]" 
                                            value="{{ poussins.souche }}" class="form-control">
                                    </div>
                                    <div class="col-sm-2">
                                        Prix
                                        <input type="number" name="poussins[{{ poussins.id }}][prix]" 
                                            value="{{ poussins.prix }}" class="form-control">
                                           Date livraison
                                           <input type="date" name="poussins[{{ poussins.id }}][datelivaison]" 
                                            value="{{ poussins.datelivaison | date('Y-m-d') }}" class="form-control">    
                                    </div>
                                    <div class="col-sm-2">
                                        Montant
                                        <input type="number" name="poussins[{{ poussins.id }}][montant]" 
                                            value="{{ poussins.montant }}" class="form-control">
                                           Date rappel 
                                        <input type="date" name="poussins[{{ poussins.id }}][daterapelle]" 
                                            value="{{ poussins.daterapelle | date('Y-m-d') }}" class="form-control"> 
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-3">
                                        OM/MOMO
                                        <input type="number" name="poussins[{{ poussins.id }}][mobilepay]" 
                                            value="{{ poussins.mobilepay }}" class="form-control">
                                    </div>
                                    <div class="col-sm-3">
                                        Credit
                                        <input type="number" name="poussins[{{ poussins.id }}][credit]" 
                                            value="{{ poussins.credit }}" class="form-control">
                                    </div>
                                    <div class="col-sm-3">
                                        Cash
                                        <input type="number" name="poussins[{{ poussins.id }}][cash]" 
                                            value="{{ poussins.cash }}" class="form-control">
                                    </div>
                                    <div class="col-sm-3">
                                        Reste
                                        <input type="number" name="poussins[{{ poussins.id }}][reste]" 
                                            value="{{ poussins.reste }}" class="form-control">
                                    </div>
                                </div>
                                
                                <button type="submit" name="submit" id="submit" class="btn btn-success btn-user btn-block">
                                    Enregistrer
                                </button>  
                            </form>
                            <hr>
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Bootstrap core JavaScript-->
    <script>
        const  inputQuantite = document.getElementById("poussin_quantite");
        const  inputPrix = document.getElementById("poussin_prix");

        function calculeTotal(params) {
           document.getElementById("poussin_montant").value=  document.getElementById("poussin_quantite").value* document.getElementById("poussin_prix").value;
        }

        inputQuantite.addEventListener('input',calculeTotal);
        inputPrix.addEventListener('input',calculeTotal);

    </script>
    <script src="{{ asset('js/client/client.js') }}"></script>

</body>

</html>
{% endblock %}
